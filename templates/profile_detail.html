{% extends 'base.html' %}

{% block content %}


<!-- zeigen wir oben den usernamen des Profilinhabers an -->
<h2> {{ profile.user }}</h2>
<br>
<!-- hier sind die Profildetails des Users -->
<p><strong>Avatar:</strong> <img src="{{ profile.avatar.url }}" alt="avatar"> </p>
<p><strong>Bio: </strong>{{ profile.bio }}</p>
<p><strong>Interessen: </strong>{{ profile.interests }}</p>

<br><br>




<!-- Wenn der angemeldete user.id nicht identisch ist mit der profil.id ..   -->
<!-- und wenn dieser profiluser nicht unter den users friends ist und auch kein friendrequest besteht  -->
<!-- dann wirdein friendrequest-link,angezeigt werden, ansonsten auf friendrequests verwiesen -->

{% if request.user.id != profile.user.id %}

    {% if profile.user.username not in freunde_namelist %}

        {% if profile.user.username not in freund_eingehend_namelist and profile.user.username not in freund_ausgehend_namelist %}
            <a href="{% url 'send_friend_request' to_user_id=profile.user.id %}">Freundschaftsanfrage senden</a>
        {% else %}

            {% if profile.user.username in freund_ausgehend_namelist %}
                <strong>{{ profile.user.username }}</strong> hat von dir einen Friendrequest erhalten! <br>
                **  Friendrequest zurückziehen  **
            {% elif profile.user.username in freund_eingehend_namelist %}
                Hey, Du hast eine Freundesanfrage von <strong>{{ profile.user.username }}</strong> bekommen, Bro! <br>
                <a href="{% url 'friend_requests' %}">Zu Deinen Friendrequests!</a>
            {% endif %}

        {% endif %}

    {% else %}
        <strong>{{ profile.user.username }}</strong> ist bereits mit dir connected, mään! <br>
        Keinen Bock mehr auf ihn/sie? ** Freundschaft Beenden  **
    {% endif %}

{% else %}
    <p>Du befindest dich auf DEINEM Profil, <strong>{{ request.user.username }}</strong>.</p>
{% endif %}


<br><br><br>




<p>--------------------------------------------------</p>
{% if request.user != profile.user %}
    <h3>{{ profile.user.username }}'s Freunde </h3>  <br>
        Er/Sie hat hier derzeit <strong>{{ num_profil_freunde }}</strong> Freunde:

    <ul>
        {% for freund in profil_freunde %}
            {% if profile.user.username != freund.from_user.username %}
                <li><strong>{{ freund.from_user.username }}</strong> ...ist ein Freund des Users!</li>
            {% else %}
                <li><strong>{{ freund.to_user.username }}</strong> ...ist ein Freund des Users!</li>
            {% endif %}
        {% endfor %}
    </ul>



{% else %}
    <h3>Meine Freunde</h3>  <br>
        Du hast hier derzeit <strong>{{ num_freunde }}</strong> Freunde:

    <ul>
        {% for freund in freunde %}
            {% if user.username != freund.from_user.username %}
                <li><strong>{{ freund.from_user.username }}</strong> ...ist dein Freund!</li>
            {% else %}
                <li><strong>{{ freund.to_user.username }}</strong> ...ist dein Freund!</li>
            {% endif %}
        {% endfor %}
{% endif %}
</ul>







<br>
<div><a href="{% url 'friend_requests' %}"> >>> Zu den EIGENEN Friendrequests >>> </a></div>




{% endblock content %}
