{% extends 'base.html' %}

{% block content %}

<!-- zeigen wir oben den usernamen des Profilinhabers an -->
<h2> {{ profile.user }}</h2>


<!-- Wenn der angemeldete user.id nicht identisch ist mit der profil.id ..   -->
<!-- und wenn dieser user nicht unter den friends ist und auch kein friendrequest besteht  -->
<!-- dann soll ein friendrequest-link,angezeigt werden -->
<!-- andernfalls wird gesagt, dass der user bereits mit dir befreundet ist oder du bereits eine anfrage gesendet hast -->
<!-- und wenn es dein eigenes profil ist, dann soll stehen: "Dein Profil" -->

{% if request.user.id != profile.user.id %}
    {% if not profile.get_friends %}
        {% if not profile.get_outgoing_friend_request %}  
            <a href="{% url 'send_friend_request' to_user_id=profile.user.id %}">Freundschaftsanfrage senden</a>
        {% else %}
            <p>Du hast schon eine Anfrage gesendet</p>
        {% endif %}
    {% else %}
            <p>{{ profile.user.username }} ist bereits mit dir connected</p>
    {% endif %}
{% else %}
    <p>Das ist Dein Profil, {{ request.user.username }}.</p>
{% endif %}

<br>
<!-- hier sind die Profildetails des Users -->
<p><strong>Bio: </strong>{{ profile.bio }}</p>
<p><strong>Interessen: </strong>{{ profile.interests }}</p>



<br>
<br>
<br>

<p>--------------------------------------------------</p>
<h3>Meine Freunde</h3>
    Du hast hier derzeit <strong>{{ profile.get_friends|length }}</strong> Freunde:

<ul>
    {% for friend in profile.get_friends %}
        {% if user.username != friend.from_user.username %}
            <li><strong>{{ friend.from_user.username }}</strong>   ...ist dein Freund</li>
        {% else %}
            <li><strong>{{ friend.to_user.username }}</strong>   ...ist dein Freund</li>
        {% endif %}
    {% endfor %}
</ul>






<br>
<div><a href="{% url 'friend_requests' %}"> >>> Zu den Friendrequests >>> </a></div>




{% endblock content %}
